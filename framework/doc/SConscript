import os, sys

Import('env bindir libdir pkgdir shrdir srcdir')

sys.path.insert(0,os.path.join(srcdir,'build/framework'))

env.Append(ENV={'LD_LIBRARY_PATH':os.environ.get('LD_LIBRARY_PATH'),
                'PYTHONPATH':sys.path})

txtdir = os.path.join(shrdir,'txt')
mandir = os.path.join(shrdir,'man')
docdir = os.path.join(shrdir,'doc')
spcdir = os.path.join(shrdir,'spec')

mn1dir = os.path.join(mandir,'man1')

htm = os.path.join(docdir,'index.html')
txt = os.path.join(txtdir,'INDEX.txt')
spc = os.path.join(spcdir,'extend.spec')
man = os.path.join(mn1dir,'index.man')

repos = os.environ.get('RSF_REPOSITORY',srcdir)

sfdoc = '../rsf/sfdoc'
python = WhereIs('python')
env.Command(htm,sfdoc,'%s $SOURCE -w %s -r %s' % (python,docdir,repos))
env.Command(txt,sfdoc,'%s $SOURCE -t %s' % (python,txtdir))
env.Command(spc,sfdoc,'%s $SOURCE -s %s' % (python,spcdir))
env.Command(man,sfdoc,'%s $SOURCE -g %s' % (python,mn1dir))

uses = os.path.join(pkgdir,'use.py')

env.Depends(htm,uses)
env.Depends(txt,uses)
env.Depends(spc,uses)
env.Depends(man,uses)
