import os

imports = ' libname cpplist srclist'

try:  # madagascar version
    Import('env root pkgdir libdir' + imports)
    env = env.Clone()
    env.Append(CPPPATH = cpplist)
except:  # autonomous version    
    Import('vars' + imports)
    root = None
    env = Environment(ENV = os.environ,
                      variables = vars,
                       CC={'CC' : '${CC}'},
                       CFLAGS={'CFLAGS' : '${CFLAGS}'},
                       CCFLAGS={'CCFLAGS' : '${CCFLAGS}'},
                  while (x<tlx) {
      lookStack = lookStack->prev ;
      if (lookStack==NULL) printf("Looking into an empty stack!!!") ;
      if (x+ONE_BLOCK_SIZE<tlx) {
	memcpy(x,lookStack->contents,ONE_BLOCK_SIZE) ;
	x += ONE_BLOCK_SIZE ;
      } else {
	unsigned int nbtail = tlx-x ;
	lookStackTop=(lookStack->contents)+ONE_BLOCK_SIZE-nbtail ;
	memcpy(x,lookStackTop,nbtail) ;
	x = tlx ;
      }
    }
  }
}

void resetadlookstack_() {
  lookStack=NULL ;
}

