# This SConstruct builds and places the JAVA API Jar in the LIB FOLDER
# that is then installed to RSFROOT

import os,sys
sys.path.append('../../framework')
import bldutil

try:
    Import('env root libdir')
    env = env.Clone()
except:
    env = bldutil.Debug()
    root = None

cp = env.get('MINESJTK')
if not cp:
    print 'Please install Mines JTK and set MINESJTK during configuration.'
    Exit(1)

files = Split('Header Writer Reader Par')

pwd = os.getcwd()
if 'java' in env.get('API',[]) and cp:
    env.Java('.',map(lambda x: x+'.java',files),JAVACLASSPATH=[cp,pwd])
    env.Jar('rsf.jar','rsf',JARCHDIR=pwd)

    env.Install('../../lib','rsf.jar')
    if root:
        env.Install(libdir,'rsf.jar')

        
