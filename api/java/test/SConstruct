from rsfproj import *
# The classpath is now automatically set. 

# Compile the Java program, this will also remove the class file when cleaning.
project.Command('Clip.class','Clip.java', 'javac $SOURCE')

# Use Flows as usual.
Flow('dat',[],
    '''
    spike n1=1000 n2=100 n3=10 nsp=1 k1=500
    ''')
# To create the dependency tree, we include the .class file that we created above
# as a source needed for this target.
# You should NEVER refer to this .class file when executing your Java program.
# You don't need to specify the classpath, because we have set the environmental variable!
Flow('clipd',['dat','Clip.class'],
    '''
    java Clip clip=0.5 in=${SOURCES[0]} out=$TARGET 
    ''')
Flow('test.attr','clipd','sfattr')

##########################################################################
# Should you need to manually tweak the classpath, you can do so by:
# temp = project['ENV']['CLASSPATH']
# project['ENV']['CLASSPATH'] = temp + ':test.jar:/user/home/test2.jar'
