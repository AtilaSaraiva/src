from rsfproj import *
import agmig 

nl = 5
dx = 0.008

lines = []
for n in range(1,nl+1):
    line = 'line%d' % n
    Flow(line,None,
         'math n1=257 d1=%g output="%g + x1*%g" ' % (dx,0.05*n,0.2*n))
    lines.append(line)
Flow('mod',lines,
     '''
     cat axis=2 ${SOURCES[1:%d]} |
     unif2 d1=0.004 n1=257 v00=%s
     ''' % (nl,string.join(map(str,range(1,nl+2)),',')))

Flow('lines','mod','igrad | bandpass flo=10 fhi=50 | put n3=1')

agmig.agmig('lines')

End()
