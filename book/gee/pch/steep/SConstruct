from rsfproj import *

Fetch('wz.10.H','wz')
Flow('wz0','wz.10.H',
     'dd data_format=native_float | tpow tpow=2')
Flow('wzsmoo','wz0','math output="abs(input)" | smooth rect1=200 rect2=4')
Flow('wz','wz0 wzsmoo','add mode=d ${SOURCES[1]} | transp')
Plot('wz','wz','grey')

for a1 in [1,5]:
    filt,lag,dec = map(lambda x: x + str(a1),['filt','lag','dec'])
    Flow([filt,lag],'wz',
         '''
         lopef dim=2 a=%d,10 w=25,250 steepdip=1 tgap=.020 lag=${TARGETS[1]}
         ''' % a1)
    Flow(dec,['wz',filt],'decon filt=${SOURCES[1]}')
Plot('dec1','dec1','grey title="1-D decon" ')
Plot('dec5','dec5','grey title="Steep-dip decon" ')

Result('wz','wz dec1 dec5','OverUnderAniso')

End()
