###########################################################################
import sys, os

sys.path.append(os.path.join(os.environ.get('RSFROOT'),'lib'))

##########################################################################

from rsfproj import *

set_resdir('../Fig')

Flow('time',None,
     "spike n1=200 d1=1 o1=1 label1='Sample' | headermath output='N*0.4'")
Flow('head','time',"window n1=41 | headermath t=0 output='exp(0.25*t)+11'")
Flow('ideal','time',"headermath t=0 output='sin(t)*0.5'")
Flow('alias','head',"headermath t=0 output='sin(t)*0.5'")

doty = 'dots dots=0 connect=0 gaineach=0 constsep=1 strings=0 clip=1.2'

Flow('data',['alias','head'],'bin1 head=${SOURCES[1]} nx=200 dx=0.4 x0=0')
Plot('data','data',doty + ' strings=1 d1=1 o1=1')

doty += ' connect=1 d1=1 o1=1'
filter = {'im1-1a':1, 'im1-2+1':2}
for im in filter.keys():
    Flow(im,['alias','head'],
         'invbin1 head=${SOURCES[1]} nx=200 dx=0.4 x0=0 filter=%d prec=n' %
         filter[im])
    Plot(im,im,doty)
    Combine(im,['data',im],'Overlay',result=1)

###########################################################################

End()
