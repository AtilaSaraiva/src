from rsf.proj import *

def plot(title):
    return '''
    grey wantaxis1=n label1=Sample label2=Trace title="%s"
    labelsz=14 titlesz=18 labelfat=10 titlefat=10 crowd1=0.9
    ''' % title

Flow('signal',None,'make second=n n1=75 n2=32 t1=2')
Plot('signal',plot('Signal'))

Flow('make',None,'make second=y n1=75 n2=32 t1=2 | put o1=0 d1=1 o2=0 d2=1')
Plot('make',plot('Signal+Noise'))

Flow('pq','make','twodip2 order=2 eps=10 lam=10 verb=y gauss=n')
Flow('rec','make pq',
     	'''
     	mcaseislet dips=${SOURCES[1]} mode=exp p=0.5
	verb=y order=1 type=b eps=0.03 niter=10 pclip=10 decr=y pscale=100
     	''')

Flow('rec1','rec','window n3=1')
Flow('rec2','rec','window f3=1')
Plot('rec1',plot('Component 1'))
Plot('rec2',plot('Component 2'))
Result('signalnoise','signal make rec1 rec2', 'SideBySideAniso')
Flow('snr1','rec2 signal','mysnr ref=${SOURCES[1]}')

Flow('recc2','make pq',
     	'''
     	mcaseislet dips=${SOURCES[1]} mode=soft 
	verb=y order=1 type=b eps=0.03 niter=10 pclip=10 decr=y pscale=100 |
	window f3=1
     	''')
Flow('snr2','recc2 signal','mysnr ref=${SOURCES[1]}')

Flow('reccc2','make pq',
     	'''
     	mcaseislet dips=${SOURCES[1]} mode=pthresh p=0.5
	verb=y order=1 type=b eps=0.03 niter=10 pclip=10 decr=y pscale=100 |
	window f3=1
     	''')
Flow('snr3','reccc2 signal','mysnr ref=${SOURCES[1]}')

Flow('recccc2','make pq',
     	'''
     	mcaseislet dips=${SOURCES[1]} mode=hard 
	verb=y order=1 type=b eps=0.03 niter=10 pclip=10 decr=y pscale=100 |
	window f3=1
     	''')
Flow('snr4','recccc2 signal','mysnr ref=${SOURCES[1]}')

End()

