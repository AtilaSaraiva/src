from rsf.proj import *

gdat = '''
grey transp=y poly=y yreverse=y crowd=0.89
label2="offset(km)" label1=time unit1=s 
'''


for data in ('data','gulf'):
    Fetch(data+'.hh','rad')
Flow('data','data.hh','dd form=native')
Result('data',gdat+'title="CMP domain" ')
Flow('gulf','gulf.hh','dd form=native | window min1=8 max1=13')
Result('gulf',gdat+'title="CMP [Gulf of Mexico]" ')

#################################################################
Flow('left1','data','window n2=1 | spray n=4')
Flow('datapad','left1 data','cat axis=2 ${SOURCES[1]}')

Flow('pq','datapad','twodip2 verb=y gauss=n eps=50')
Plot('pq1','pq','window n3=1| grey color=j ')
Plot('pq2','pq','window n3=1 f3=1| grey color=j ')
Result('dips','pq1 pq2','SideBySideAniso')
Flow('rec','datapad pq',
     	'''
     	mcaseislet dips=${SOURCES[1]} 
	verb=y order=1 type=b eps=0.01 niter=10 pclip=5 pscale=25
     	''')


Plot('data',gdat+'title="CMP data" wantaxis2=n')
Flow('rec1','rec','window n3=1 f2=4')
Flow('rec2','rec','window f3=1 f2=4')
Plot('rec1',gdat+'title="multiples" wantaxis2=n')
Plot('rec2',gdat+'title="primaries" wantaxis2=n')
Result('all1','data rec1 rec2', 'SideBySideAniso')

##################################################################
Flow('left2','gulf','window n2=1 | spray n=38')
Flow('gulfpad','left2 gulf','cat axis=2 ${SOURCES[1]}')

Flow('pqq','gulfpad','twodip2 verb=y gauss=n eps=20')
Plot('pqq1','pqq','window n3=1 f2=38| grey color=j ')
Plot('pqq2','pqq','window n3=1 f3=1 f2=38| grey color=j ')
Result('dipss','pqq1 pqq2','SideBySideAniso')
Flow('recc','gulfpad pqq',
     	'''
     	mcaseislet dips=${SOURCES[1]} 
	verb=y order=2 type=b eps=0.01 niter=10 pclip=5 pscale=30
     	''')

Plot('gulf',gdat+'title="Gulf of Mexico:CMP" wantaxis2=n')
Flow('recc1','recc','window n3=1 f2=38')
Flow('recc2','recc','window f3=1 f2=38')
Plot('recc1',gdat+'title="multiples" wantaxis2=n')
Plot('recc2',gdat+'title="primaries" wantaxis2=n')
Result('all2','gulf recc1 recc2', 'SideBySideAniso')

End()
