from rsf.proj import *

# test: marm240x737.bin
nz=240
nx=737
dz=12.5	#unit: m
dx=12.5	#unit: m

# original velocity model
Flow('vel','marm240x737.bin',
	'''
     	echo in=${SOURCES[0]} n1=%d n2=%d data_format=native_float |
     	put d1=%g o1=0 label1=Depth   unit1=m
     	 d2=%g o2=0 label2=Lateral unit2=m
	'''%(nz,nx,dz,dx))
Plot('vel',
     '''
     grey title="Marmousi model" wantitle=y allpos=y color=j
     pclip=100 scalebar=y bartype=v barlabel="V" barunit="m/s"
	screenratio=0.45 
     ''' )


# smoothed velocity model, it will be the initial model for FWI   
Flow('smvel','vel','smooth repeat=10 rect1=10 rect2=20')
Plot('smvel',
     '''
     grey title="Smoothed Marmousi model" wantitle=y allpos=y color=j
     pclip=100 scalebar=y bartype=v barlabel="V" barunit="m/s"
	screenratio=0.45 
     ''' )

Result('all','vel smvel','TwoRows')


Flow('shots','vel',
	'''
	sfgenshots csdgather=n fm=10 dt=0.001 ns=20 ng=737 nt=3000
	sxbeg=15 szbeg=1 jsx=37 jsz=0 gxbeg=0 gzbeg=1 jgx=1 jgz=0
	''')
Result('shots','grey color=g ')



End()
