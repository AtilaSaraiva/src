from rsf.proj import *

Flow('vel',None,
     	'''
     	math output=1000 n1=301 n2=301 d1=1 d2=1
     	label1=x1 unit1=m label2=x2 unit2=m 
     	''')
Flow('rho','vel','math output=1000')
Flow('eta','vel','math output=10000000')

Flow('wav','vel rho eta',
	'''
	sfmaxwell_cpml2 rho=${SOURCES[1]} eta=${SOURCES[2]} order1=y
	nb=30 nt=500 dt=0.0005 verb=y fm=30
	''')
Result('wav',
	'''	
	grey  title="Mexwell Attenuation Model" gainpanel=all
	color=i screenratio=1
	''')

#sfmaxwell_direct_backward,sfmaxwell_sponge2_backward
Flow('wf1 wb1 ef1 eb1','vel rho eta',
	'''
	sfmaxwell_cpml2_backward rho=${SOURCES[1]} eta=${SOURCES[2]}
	back=${TARGETS[1]} ef=${TARGETS[2]} eb=${TARGETS[3]} 
	attenuating=n order1=n	nb=30 nt=300 dt=0.0004 verb=y fm=30
	''')
Result('wf1',
	'''	
	grey  title="Mexwell Attenuation Model" gainpanel=all
	color=i screenratio=1 labelfat=2 titlefat=3
	''')
Result('wb1',
	'''	
	grey  title="Mexwell Attenuation Model" gainpanel=all
	color=i screenratio=1 labelfat=2 titlefat=3
	''')

Plot('energy1','ef1 eb1',
	'''
	cat axis=2 ${SOURCES[1]}|
	graph dash=0,1 grid=y plotfat=3 label1=Time unit1=s
	label2="Energy without attenuation"  
	unit2= title="Forward-solid;Backward-dash"
	color=i screenratio=1 labelfat=2 titlefat=3
	''')

#sfmaxwell_direct_backward,sfmaxwell_sponge2_backward
Flow('wf2 wb2 ef2 eb2','vel rho eta',
	'''
	sfmaxwell_cpml2_backward rho=${SOURCES[1]} eta=${SOURCES[2]}
	back=${TARGETS[1]} ef=${TARGETS[2]} eb=${TARGETS[3]} 
	attenuating=y order1=n	nb=30 nt=300 dt=0.0004 verb=y fm=30
	''')
Result('wf2',
	'''	
	grey  title="Mexwell Attenuation Model" gainpanel=all
	color=i screenratio=1 labelfat=2 titlefat=3
	''')
Result('wb2',
	'''	
	grey  title="Mexwell Attenuation Model" gainpanel=all
	color=i screenratio=1 labelfat=2 titlefat=3
	''')

Plot('energy2','ef2 eb2',
	'''
	cat axis=2 ${SOURCES[1]}|
	graph dash=0,1 grid=y plotfat=3 label1=Time unit1=s
	label2="Energy with attenuation"  
	unit2= title="Forward-solid;Backward-dash"
	color=i screenratio=1 labelfat=2 titlefat=3
	''')
Result('energy','energy1 energy2','SideBySideIso')

End()
