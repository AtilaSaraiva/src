from rsf.proj import *

Flow('headerattr.txt','../fetch/vp_hdr.rsf',
     'sfheaderattr > $TARGET && /bin/cat $TARGET',stdout=-1)

#sftahread input=SEG14.Pisoelastic.rsf | sftahgethw key=sx,gx,offset >/dev/null
# x coordinate must be divided by 10000 scalel and scaleco are both -10000
# group interval and group interval are 25 m 
#<SEG14.Pisoelastic_hdr.rsf sfheaderattr 
#91 headers, 513600 traces

#dt         39           4000 @ 0	          4000 @ 0	          4000
#tscalar    82         -10000 @ 0	        -10000 @ 0	        -10000
#****************************************************************************** 

# near trace gather - ned to drive off sx,gx headers - tahheadermath?

Result('vp','../fetch/vp.rsf',"sfgrey title='vp' scalebar=y color='j'")

Flow('mshots','../fetch/vp.rsf',
     '''
     sfput unit1="m" unit2="m" label1="Depth" d1=10 |
     sfmshots 
        amp=1
        csdgather=n
        dt=.002 nt=5000
        fm=10 
        gzbeg=4 jgz=0 gxbeg=0 jgx=1   ng=400 
        szbeg=2 jsz=0 sxbeg=0 jsx=100 ns=1
	nb=30
     ''')

Result('mshots','sfwindow min1=1 min2=500 | sftpow tpow1=2 | sfgrey scalebar=y pclip=99')
       
End()
