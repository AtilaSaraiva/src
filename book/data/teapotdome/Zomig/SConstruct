from rsf.proj import *
import math

Flow('vel','tvpairs.txt',
     '''
     echo in=$SOURCE data_format=ascii_float n1=2 n2=10 |
     dd form=native
     ''',stdin=0)

Flow('Vrms_interp','vel',
    '''
      transp | linear
          n1=2049 o1=0 d1=0.002 
    ''')

Result('Vrms_interp',
     '''
     graph  title=Interpolated Velocity 
     ''')

Flow ('Vint','Vrms_interp','dix niter=100 rect1=15')

Result('Vint',
     '''
     graph  title=Interval Velocity 
     ''')
	

Fetch('final_stack.rsf','teapot',server='http://s3.amazonaws.com',top='')

Result('final_stack','sfgrey')


Flow ('spray2','Vint','spray axis=2 n=188 d=1 o=1')

Result('spray2',
     '''
     sfgrey color=j  title=Interval Velocity interpolated
     ''')

Flow ('Vint3D','spray2','spray axis=3 n=345 d=1 o=1')

Result('Vint3D',
     '''
     sfbyte | sfgrey3 color=j flat=n 
     ''')

End()