from rsf.proj import *
import math

# get the stack created using seismic unix
Fetch('final_stack.rsf','teapot',server='http://s3.amazonaws.com',top='')
Result('sustack','final_stack','grey title="su stack"')

Fetch('npr3_gathers.sgy','teapot',server='http://s3.amazonaws.com',top='')

Flow(['npr3_gathers.rsf','npr3_gathers_hdr.rsf'],'npr3_gathers.sgy',
     'sfsegyread tfile=${TARGETS[1]}')

Flow('gathersheaderattr.txt',
     'npr3_gathers_hdr.rsf',
     'sfheaderattr >temp; cat temp; cat temp ')

Fetch('npr3_field.sgy','teapot',server='http://s3.amazonaws.com',top='')

Flow(['npr3_field.rsf','npr3_field_hdr.rsf'],'npr3_field.sgy',
     'sfsegyread tfile=${TARGETS[1]}')
Flow('fieldheaderattr.txt',
     'npr3_field_hdr.rsf',
     'sfheaderattr >temp; cat temp; cat temp ')

pdfread = WhereIs('acroread') or WhereIs('kpdf') or WhereIs('evince') or \
    WhereIs('xpdf') or WhereIs('gv') or WhereIs('open')
if pdfread:
    # download and view the survey notes:
    Fetch('3dload_Teapot_Dome_3D.pdf','teapot',
          server='http://s3.amazonaws.com',top='')
    Result('3dload','3dload_Teapot_Dome_3D.pdf',
           pdfread + ' $SOURCE',stdin=0)
    Fetch('teapot_processing.pdf','teapot',
          server='http://s3.amazonaws.com',top='')
    Result('processing','teapot_processing.pdf',
           pdfread + ' $SOURCE',stdin=0)
    
End()
