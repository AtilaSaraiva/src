from rsfproj import *

Flow('zo1',None,
     '''
     spike n1=400 nsp=5 k1=100,150,200,250,300 |
     bandpass flo=5 fhi=20
     ''')
Flow('zo','zo1','spray axis=2 n=101 o=-0.5 d=0.01')

Flow('vel','zo1','math output=2')
Flow('cmp','zo vel','inmo velocity=${SOURCES[1]}')

Result('cmp',
       'wiggle wanttitle=n yreverse=y transp=y poly=y wheretitle=b wherexlabel=t')

Flow('stack','cmp','stack norm=n')

Flow('stack2','stack','deriv | math output="input/sqrt(x1+0.002)" | halfint adj=n')

Result('comp','stack2 stack zo1',
       '''
       cat axis=2 ${SOURCES[1:3]} |
       dots labels="Filtered Stack:Stack:Zero-Offset"
       ''')

Plot('2d','zo1 stack2',
     '''
     cat axis=2 ${SOURCES[1]} |
     scale axis=1 |
     graph title=2-D dash=0,1
     ''')

Flow('vel3','vel','spray axis=2 n=101 o=-0.5 d=0.0')
Flow('cmp3','cmp vel3','spray axis=2 n=101 o=-0.5 d=0.01 | inmo velocity=${SOURCES[1]}')

Result('cmp3','byte gainpanel=all | grey3 wanttitle=n frame1=220 frame2=50 frame3=50 flat=n point2=0.7')

Flow('stack3','cmp3','stack norm=n | stack norm=n')

Flow('stack32','stack3','deriv | math output="input/(x1+0.002)" ')

Result('comp3','stack32 stack3 zo1',
       '''
       cat axis=2 ${SOURCES[1:3]} |
       dots labels="Filtered Stack:Stack:Zero-Offset"
       ''')

Plot('3d','zo1 stack32',
     '''
     cat axis=2 ${SOURCES[1]} |
     scale axis=1 |
     graph title=3-D dash=0,1
     ''')

Result('dim','2d 3d','OverUnderAniso')

End()
