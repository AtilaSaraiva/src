from rsfproj import *
import velcon

Fetch('cmps-tp.HH','blake')
Flow('blake0','cmps-tp.HH',
     'dd form=native | reverse which=2')

Flow('off1',None,'math n1=24 o1=0.4 d1=0.1  output=x1')
Flow('off2',None,'math n1=24 o1=2.8 d1=0.05 output=x1')
Flow('off','off1 off2','cat axis=1 ${SOURCES[1]}')

Flow('far',None,'spike n1=24')
Flow('zero',None,'spike n1=24 mag=0')
Flow('mask','far zero',
     '''
     interleave axis=1 ${SOURCES[1]} |
     cat axis=1 ${SOURCES[0]} |
     put o1=0.4 d1=0.05 | spray axis=1 n=625 d=0.004 o=4
     ''')

#velcon.velcon('bei',
#              nv=48,      # continuation steps
#              v0=1.3,     # initial velocity
#              dv=0.025,   # velocity step
#              nx=250,     # lateral dimension
#              padt=1024,  # time padding
#              padt2=2048, # extra time padding
#              padx=521,   # lateral padding
#              v1=1.8,     # other velocity
#              rect1=15,   # vertical smoothing
#              rect2=30)   # lateral  smoothing

End()
       
