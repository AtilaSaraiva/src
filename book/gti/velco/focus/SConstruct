from rsfproj import *

Flow('mod3',None,
     '''sigmoid n1=200 d2=.008 n2=200 |
     smooth rect1=3 diff1=1 |
     smooth rect1=3''')
Flow('dki','mod3',
     'preconstkirch inv=y zero=y vel=1.5 nh=1 h0=0 dh=0')
Flow('dip','dki','dip2 order=2 verb=y niter=10 gauss=n eps=1 lam=1')
Flow('pwd','dki dip','pwd order=2 dip=${SOURCES[1]}')

Flow('ckx','dki','pad n2=421 | cosft sign2=1 | spray axis=2 n=1 o=0 d=0.008')
Flow('vlf','ckx',
     '''
     fourvc pad=1024 pad2=2048 nv=100 dv=0.02 v0=0.00001 |
     cosft sign3=-1 | window n3=200 
     ''')
Flow('foc','vlf','focus')

Flow('pkx','pwd','pad n2=421 | cosft sign2=1 | spray axis=2 n=1 o=0 d=0.008')
Flow('plf','pkx',
     '''
     fourvc pad=1024 pad2=2048 nv=100 dv=0.02 v0=0.00001 |
     cosft sign3=-1 | window n3=200 
     ''')

End()
