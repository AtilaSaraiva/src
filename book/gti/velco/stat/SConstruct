from rsfproj import *
import stack

private = {'login':os.environ.get('BEG_LOGIN'),
           'password':os.environ.get('BEG_PASSWORD'),
           'server':os.environ.get('BEG_SERVER')}

for case in ('pp0','water'):
    Fetch(case+'.rsf','statoil',private)
    Flow('s'+case,case,'dd form=native')

Flow('water2','swater','scale dscale=2 | despike | smooth rect1=100')
Flow('p0','spp0 water2','pad end1=2000 | datstretch datum=${SOURCES[1]} inv=y')
Flow('st','p0','window min1=1.8 max1=2.8 | agc rect1=250')

stack.diffimg('st',
              'st',
              v0=1470,
              nv=101,
              dv=12.5,
              nx=1200,
              padx=2049,
              nt=1001,
              an=10,
              tmin=1.8,
              tmax=2.8,
              rect1=50,
              rect2=40,
              srect1=5,
              srect2=5,
              frect1=40,
              frect2=10,
              j3=5,
              units='m',
              beg1=1800)

End()
