from rsfproj import *
import fdm

# ------------------------------------------------------------
par = {
    'nz':250, 'dz':2,     'oz':0, 'zmin':0, 'zmax':500,
    'nx':250, 'dx':4,     'ox':0, 'xmin':0, 'xmax':1000,
    'nt':1500,'dt':0.0005,'ot':0, 'kt':200, 'ft':0.1,
#
    'nbz':50,'tz':0.006125,
    'nbx':50,'tx':0.006125,
    'verb':'y', 'abc':'y', 'free':'n',
    'snap':'y', 'jsnap':100,
    's_o':200, 's_d':100, 's_n':3,
    'r_o':000, 'r_d':4,   'r_n':150
    }
# ------------------------------------------------------------
# velocity
Flow('velo',None,
     '''
     spike nsp=3 mag=-1000,-1000,-1000
           n1=%(nz)d d1=%(dz)g o1=%(oz)g
           k1=160,140,180
           l1=250,250,250
           label1="z"
           n2=%(nx)d d2=%(dx)g o2=%(ox)g
           k2=001,101,151
           l2=100,150,250
           label2="x" |
     math output="input + 2000"
     ''' % par)

# wavelet
Flow('wave',None,
     '''
     spike nsp=1 mag=1 k1=%(kt)d
     n1=%(nt)d d1=%(dt)g o1=%(ot)g |
     ricker1 frequency=50
         ''' % par )    
Result('wave','wave','graph')

# ------------------------------------------------------------

for s_i in range(par['s_n']):
    ss = 'ss' + str(s_i)
    rr = 'rr' + str(s_i)
    gg = 'gg' + str(s_i)

    dd = 'dd' + str(s_i)
    ww = 'ww' + str(s_i)

    fdm.velo('velo',par)

    fdm.coor(s_i,ss,rr,par)
    Result(gg,['velo',ss,rr],'Overlay')
    
    fdm.shot(s_i,dd,ww,'wave','velo',ss,rr,par)
    Result(dd,[dd,ss,rr],'Overlay')

# ------------------------------------------------------------


End()
