from rsfproj import *

import math
###########################################################################

# examples from SU/src/demos/Making_Data/CommonOffset/*ZeroOffset

for dip in [0,20,40,60]:
    mod = 'dip%d' % dip
    ref = 'ref%d' % dip
    kir = 'kir%d' % dip
    slp = 'slp%d' % dip
    dzdx = math.tan(math.pi*dip/180.)
    Flow(slp,None,'spike n1=1001 d1=0.005 mag=%g' % dzdx)
    Flow(ref,slp,'math output="1+x1*input" ')
    Flow(mod,ref,'unif2 n1=101 d1=0.04 v00=1,2')
    Plot(mod,
           '''
           grey label1="Depth (km)" label2="Lateral (km)"
           title="%d-degree Model"
           color=j allpos=y bias=1 Xscreenratio=1.25 Xscalebar=y
           Xbarlabel="Velocity (km/s)"
           ''' % dip)
    Flow(kir,[ref,slp],
         '''
         kirmod nt=750 dt=0.008 vel=2 dip=${SOURCES[1]}
         nh=1 h0=0 ns=100 s0=0.05 ds=0.05 |
         window
         ''')
    Plot(kir,
         '''
         grey pclip=99.9 max1=4 title=Backscatter
         label1="Time (s)" label2="Lateral (km)"
         ''')
    Result(mod,[mod,kir],'SideBySideAniso')

############################################################################

End()
