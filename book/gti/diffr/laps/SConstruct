from rsfproj import *
import stack

# Get the data

data = 'diff_test1.txt'
Fetch(data,'long')

Flow('data',data,
     '''
     echo n1=501 n2=512 d1=0.001 d2=0.015 o1=0 o2=0
     label1=Time unit1=s label2=Space unit2=km
     in=$SOURCE data_format=ascii_float |
     dd form=native''')

Result('data','grey title=Input')

# Estimate local slope

#Flow('slope','data','dip rect1=10 rect2=10 liter=100')
#Result('slope','grey color=j title="Dominant Slope" scalebar=y')

# Remove reflections

#Flow('diffr','data slope','pwd dip=${SOURCES[1]}')
#Result('diffr','grey title="Removed Reflections" ')

stack.diffimg('laps',
              'data',
              v0=2.5,
              nv=101,
              dv=0.1,
              nx=512,
              padx=1024,
              nt=501,
              tmin=0,
              tmax=10,
              rect1=10,
              rect2=10,
              srect1=1,
              srect2=10,
              vslope=None,
              units='km',
              f1=1,
              j3=1,
              dx=1,
              x0=0,
              beg1=0,
              frect1=0,
              frect2=0,
              an=1,
              nout=2048,
              vx0=None)

End()

