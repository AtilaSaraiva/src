from rsfproj import *
import math, string

ang = (0,15,30,45)
nang = len(ang)
    
Flow('dip',None,'spike n1=1000 d1=4 o1=0 n2=%d nsp=%d k2=%s mag=%s' % 
     (nang,nang,string.join(map(str,range(1,1+nang)),','),
      string.join(map(lambda a: str(math.tan(a*math.pi/180)),ang),',')))
Flow('ref','dip','math output="300+input*x1" ')

for case in ('pp','ps'):
    Flow(case,'ref dip',
         '''
         kirmod vel=2000 vel2=%d dip=${SOURCES[1]}
         nt=1500 dt=0.002 freq=20
         nh=128 dh=20 h0=-1280
         ns=1 ds=20 s0=1500 | tpow tpow=1
         ''' % ((2000,1000)[case=='ps']))
    Result(case,'grey title="%s" label2="Offset (m)" ' % string.upper(case))

End()
