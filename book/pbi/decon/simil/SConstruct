from rsfproj import *

Flow('one',None,'math n1=1000 d1=0.1 output="sin(x1)" ')

Flow('str','one','math output="sin(0.1*x1)" ')

Flow('two','one str',
     'warp1 other=${SOURCES[0]} warpin=${SOURCES[1]} nliter=0')

Flow('two2','two','math output="input*(1+sin(0.05*x1))/2" ')

for case in ('','2'):
    Flow('dif'+case,['two'+case,'one'],'add scale=1,-1 ${SOURCES[1]}')
    Flow('env'+case,'dif'+case,'envelope')
    Flow('simil'+case,['one','two'+case],'similarity other=${SOURCES[1]} rect1=30')
    Result('simil'+case,['simil'+case,'env'+case,'dif'+case,'two'+case,'one'],
       '''
       cat axis=2 ${SOURCES[1:5]} |
       dots labels="Similarity:Envelope:Difference:Two:one" gaineach=0
       ''')

End()
