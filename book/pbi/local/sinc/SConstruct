from rsfproj import *
import math

Flow('clean',None,
     '''
     math n1=61 o1=-3 d1=0.1
     output="sin(%g*x1)/(%g*x1)"
     ''' % (math.pi,math.pi))
Plot('clean','graph title=Data dash=1 min2=-0.5 max2=1.2')

Flow('noisy','clean','noise var=0.01 seed=2007')
Plot('noisy','graph wanttitle=n symbol=* min2=-0.5 max2=1.2 plotcol=5')

Flow('t0','noisy','math output=1')
Flow('t1','noisy','math output="%g*x1" ' % math.pi)
Flow('t','t0 t1','cat axis=2 ${SOURCES[1]}')

Flow('flt pred','t noisy',
     'lpf match=${SOURCES[1]} pred=${TARGETS[1]} rect1=3')
Plot('pred','graph title=Fitting min2=-0.5 max2=1.2 plotcol=3')

Result('clean','noisy clean','Overlay')
Result('psinc','noisy pred','Overlay')

End()
