from rsfproj import *

import os
private = {'login':os.environ.get('BEG_LOGIN'),
           'password':os.environ.get('BEG_PASSWORD'),
           'server':os.environ.get('BEG_SERVER')}

Fetch(['acig10.hh','cmp.hh'],'acig',private)

Flow('acig','acig10.hh',
     'dd data_format=native_float | window n3=1')
Plot('acig','acig','grey title="Angle Common-Image Gather" ')

Flow('dip','acig','dip2 eps=10 lam=1')
Flow('dso','acig','flat eps=10 lam=1')
Plot('dso','dso','grey title=Flattened')

Flow('pick','dip','pick0')

for plot in [0,1]:
    Plot('pick%d' % plot,'pick',
         '''
         window j2=40 |
         graph yreverse=y plotcol=%d plotfat=%d
         min1=0 max1=31 min2=0 max2=800
         wanttitle=n wantaxis=n
         ''' % ((0,5)[plot],(10,1)[plot]))
Plot('acig0','acig pick0 pick1','Overlay')
Result('acig','acig acig0 dso','SideBySideAniso')

Flow('cmp','cmp.hh',
     '''
     dd data_format=native_float |
     tpow tpow=2 |
     nmostretch half=n v0=1.5 |
     mutter half=n v0=1.8
     ''')
Plot('cmp','cmp','grey title="CMP Gather" ')

Flow('cmp-dip','cmp','pad n2=100 | dip2 eps=40 lam=10 | window n2=60')
Flow('cmp-dso','cmp','pad n2=100 | flat eps=40 lam=10 | window n2=60')
Plot('cmp-dso','cmp-dso','grey title=Flattened')

Flow('cmp-pick','cmp-dip','pick0')

for plot in [0,1]:
    Plot('cmp-pick%d' % plot,'cmp-pick',
         '''
         window j2=40 |
         graph yreverse=y plotcol=%d plotfat=%d
         min1=0 max1=59 min2=0 max2=999
         wanttitle=n wantaxis=n
         ''' % ((0,5)[plot],(10,1)[plot]))
Plot('cmp0','cmp cmp-pick0 cmp-pick1','Overlay')
Result('cmp','cmp cmp0 cmp-dso','SideBySideAniso')
    
###########################################################################
End()
