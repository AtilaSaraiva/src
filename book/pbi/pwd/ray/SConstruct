from rsfproj import *

###########################################################################

# 'marm'

dipopts = 'nw=3 niter=20 nj1=5 eps=100 lam=10 verb=y p0=0'

dat = 'curve-left'
dip = dat + '-dip'
res = dat + '-res'
Flow(dat,'curve','window n2=15')
opts = 'order=3 niter=20 nj1=4 eps=100 lam=10 verb=y p0=1 sign=1'
Flow(dip,dat,'dip ' + opts)
Result(dip,dip,'grey color=j wantscalebar=y pclip=100 title=Dip')
Flow(res,dat,'dealias ' + opts)
Plot(res,res,'grey title=Interpolated')

for dat in ('curve','linear','random'):
    input = 'input.%s.segy' % dat
    Fetch(input,'ray')
    Flow(dat,input,
         '''segyread tape=$SOURCE data=1
         hfile=head.A bfile=head.B tfile=head.T''',
         stdin=0)
    rev = dat + '-rev'
    Flow(rev,dat,'reverse which=2')
    Plot(dat,dat,'bandpass fhi=125 | grey title=%s pclip=100' % dat)
    dip = dat + '-dip'
    Flow(dip,dat,'dip ' + dipopts)
    Result(dip,dip,'grey color=j wantscalebar=y pclip=100 title=Dip')
    dip = rev + '-dip'
    Flow(dip,rev,'dip ' + dipopts)
    Result(dip,dip,
                '''reverse which=2 |
                grey color=j wantscalebar=y pclip=100 title=Dip''')
    res = dat + '-res'
    Flow(res,dat,'bandpass fhi=125 | dealias ' + dipopts)
    Plot(res,res,'grey title=Interpolated')
    Result(dat,[dat,res],'SideBySideAniso')
    
###########################################################################
End()
