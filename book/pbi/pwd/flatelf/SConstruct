from rsfproj import *


private = {'login':os.environ.get('BEG_LOGIN'),
           'password':os.environ.get('BEG_PASSWORD'),
           'server':os.environ.get('BEG_SERVER')}


Fetch('elf0.H','elf',private)

Flow('elf','elf0.H',
     '''
     dd form=native | cut n3=1 n2=1 n1=300 f3=663 f2=67 |
     bandpass flo=5 fhi=60
     ''')

Flow('gath','elf','window n2=128 n3=1 f3=500')
Plot('gath','grey unit1=s unit2=m  title="(a) Input" ')

Flow('dip','gath','dip rect1=10 rect2=10 p0=0 pmin=0')
Plot('dip','grey unit1=s unit2=m  color=j title="(b) Slope" allpos=y scalebar=y')

Flow('flat','gath dip','flat dip=${SOURCES[1]} eps=0.05')
Plot('flat','grey unit1=s unit2=m  title="(c) Flattened" ')

Flow('pick','dip','remap1 n1=1000 | pwpick eps=0.05 | window n1=800')
Plot('pick0','pick',
     '''
     grey color=j allpos=y
     title="(d) Relative Age" clip=3.2
     ''')
Plot('pick1','pick',
     '''
     contour c0=0 dc=0.05 nc=64
     transp=y yreverse=y plotcol=7 plotfat=5
     wanttitle=n wantaxis=n
     ''')
Plot('pick','pick0 pick1','Overlay')

Result('gflat','gath dip flat pick','SideBySideAniso')

End()
