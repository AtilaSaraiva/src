from rsfproj import *

data = {
    'pz': 'PZmig_nail.sgy',
    'ps': 'PSmig_nail.sgy'
    }

import os
private = {'login':os.environ.get('BEG_LOGIN'),
           'password':os.environ.get('BEG_PASSWORD'),
           'server':os.environ.get('BEG_SERVER')}

for mode in ['pz','ps']:
    Fetch(data[mode],'cameron',private)
    Flow([mode,mode+'hhead',mode+'bhead',mode+'head'],data[mode],
              '''segyread tape=$SOURCE
              hfile=${TARGETS[1]} bfile=${TARGETS[2]} tfile=${TARGETS[3]}
              ''',stdin=0)
    Flow(mode+'cube',[mode,mode+'head'],
              'intbin head=${SOURCES[1]} yk=cdp')

Flow('pznail','pzcube','window n1=1 min1=0.796')
Flow('psnail','pscube','window n1=1 min1=1.964')

grey = '''
grey transp=n yreverse=n color=b
label1="Inline" label2="Crossline" title="%s"
'''

Plot('pznail',grey % 'PP: Time=0.796 s')
Plot('psnail',grey % 'PS: Time=1.964 s')
Result('nails',['pznail','psnail'],'SideBySideAniso')
#             pstexpen='color=y fat=1 fatmult=1.5 invras=y')


Plot('pzzero','pznail','scale dscale=0 | ' + grey % 'PP: Time=0.796 s')
Plot('pszero','psnail','scale dscale=0 | ' + grey % 'PS: Time=1.964 s')
Result('zero',['pzzero','pszero'],'SideBySideAniso')
     
###########################################################################
End()
