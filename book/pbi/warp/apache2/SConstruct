from rsfproj import *
import os, string
import warp

private = {'login':os.environ.get('BEG_LOGIN'),
           'password':os.environ.get('BEG_PASSWORD'),
           'server':os.environ.get('BEG_SERVER')}

for mode in ('pp','ps'):
    Mode = string.upper(mode)
    data = mode + '2.rsf'
    Fetch(data,'apache',private)
    Flow(mode,data,'dd form=native')
    Plot(mode+'2',mode,'grey color=G title=%s label1="Time (s)" ' % Mode)

Result('apache','pp2 ps2','SideBySideIso')

gamma = 2.5

#Flow('pp2','ppcube','window max1=1.1 | scale dscale=2')

Flow('warp0','pp','math output="%g*x1" ' % (0.5*(gamma-1)))

#Result('pp2','pp2','Overlay')

Flow('pss','ps','fft1 | pad n1=513 | fft1 inv=y opt=n')
Flow('pps','pp','costaper nw1=50')

warp.warp2('apa','pps','pss','warp0',
           nx=600,
           tmax=1.1,
           tmin=0.3,
           inter=4,
           j2=4,
           trace=300,
           dt=0.002,
           g0=0.8,
           pmin=1.02,
           gmin=2,
           gmax=3.5,
           ng=51,
           rect1=50,
           rect2=200,
           fmin=10,
           fmax=80,
           frect=6,
           frame1=200,
           iter=2,
           clip=11.33)
    
End()
