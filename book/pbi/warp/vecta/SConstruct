###########################################################################
# STANDARD HEADER
###########################################################################
import sys, os

sys.path.append(os.path.join(os.environ.get('RSFROOT'),'lib'))

from rsfproj import *
Book()

###########################################################################
#
# Data
#
###########################################################################

datdir  = 'ftp://begpc132.beg.utexas.edu/data/vecta'

trace=300

Flow('line',None,
     'echo %d 0 %d 4 n1=4 data_format=ascii_float in=$TARGET' %
     (trace,trace))
Plot('line','line',
     '''
     dd data_format=native_float |
     dd data_format=native_complex |
     graph min2=0 max2=4 min1=-0.5 max1=471.5 pad=n wantaxis=n wanttitle=n
     ''')

for mode in ['pp','ps']:
    data = 'bend_l1_%cmig_enhanc.sgy' % mode[1]
    Fetch(data,datdir)
    Flow(mode,data,
         'segyread tape=$SOURCE read=data | window n2=471',stdin=0)
    Plot(mode,mode,
         'grey title=%s label1="Time (s)" label2="Trace" ' % mode.upper())
    Result(mode,[mode,'line'],'Overlay')
    Flow(mode+'trace',mode,'window n2=1 min2=%d' % trace)

Result('vtrace','pptrace pstrace',
       '''
       pad n1=2048 | cat axis=2 ${SOURCES[1]} |
       dots poly=y label1="Time (s)" labels=PP:PS
       ''')

nails = Split('''
1.046 1.788
1.188 1.976
1.396 2.270
1.560 2.492
3.000 4.500
''')


###########################################################################
End()
