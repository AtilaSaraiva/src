from rsfproj import *
import string
import warp

private = {'login':os.environ.get('BEG_LOGIN'),
           'password':os.environ.get('BEG_PASSWORD'),
           'server':os.environ.get('BEG_SERVER')}

for case in ('pp','ps'):
    segy = 'Image_%s_stack.segy' % case
    Fetch(segy,'dapeng',private)

    Flow(case,segy,
         '''
         segyread read=d tape=$SOURCE
         ''',stdin=0)
    Plot(case,
         '''
         grey color=G title=%s label1="Time (s)" label2=Trace
         ''' % string.upper(case))
    
    Flow(case+'2',case,'bandpass flo=5 fhi=125 | scale axis=2')

Result('dapeng','pp ps','SideBySideIso')

gamma = 3.6

Flow('warp0','pp','math output="%g*x1" ' % (0.5*(gamma-1)))

warp.warp2('dap','pp2','ps2','warp0',
           nx=1000,
           tmax=1,
           inter=5,
           trace=500,
           dt=0.002,
           g0=0.9,
           gmin=3,
           gmax=4,
           ng=51,
           rect1=50,
           rect2=50,
           fmin=30,
           fmax=120,
           frect=9,
           frame1=400,
           iter=2,
           clip=0.5)

End()
