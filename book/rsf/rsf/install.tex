\title{RSF Installation}
\email{sergey.fomel@beg.utexas.edu}
\author{Sergey Fomel}
\lefthead{Fomel}
\righthead{RSF installation}

%\begin{document}

\maketitle

\begin{abstract}
RSF has been installed and is periodically tested on
\begin{itemize}
\item Different Linux distributions (Fedora, RedHat, SuSE, Debian, Ubuntu)
\item FreeBSD and OpenBSD
\item Solaris
\item MacOS X
\item Windows under the \href{http://www.cygwin.com/}{Cygwin} environment and 
Microsoft's \href{http://www.microsoft.com/technet/interopmigration/unix/sfu/default.mspx}{Services for UNIX} environment.
\end{itemize}
\end{abstract}

\section{Prerequisites}
\pdfbookmark[1]{Prerequisites}{prq}

\begin{enumerate}
\item C compiler. ANSI-compliant compiler such as
  \href{http://gcc.gnu.org/}{GCC} should work. GCC usually comes pre-installed
  on Linux machines.
\item Python interpreter. \href{http://www.python.org/}{Python} is an
  interpretable programming language. It is used by RSF in installation
  scripts and project management scripts.  Python comes pre-installed on
  RedHat Linux.
\item SCons (Software Construction). SCons is a Python-based tool for project
  management and software construction. It is a modern replacement for the
  Unix ``make'' utility. RSF uses SCons for both software construction and
  processing flow management. The current version of SCons is available at
  \url{http://www.scons.org/}. It is also provided under the \texttt{scons}
  directory in the RSF source distribution.
\end{enumerate}

\section{Downloading the development version}

The best way to obtain the current working version of RSF is with a Subversion
client. \href{http://subversion.tigris.org/}{Subversion} is a version control
system, which is designed as a replacement for CVS.

To obtain the latest RSF source with Subversion, run 
\begin{verbatim}
svn co https://svn.sourceforge.net/svnroot/rsf/trunk RSF
\end{verbatim}
The source will be installed under directory \texttt{RSF}. You can also browse
individual files in the repository at
\url{http://svn.sourceforge.net/viewcvs.cgi/rsf/trunk/}

Subversion is a simple and convenient system to use. For example, to update
the source distribution at any time, you can simply run
\begin{verbatim}
svn update
\end{verbatim}
inside the directory that needs updating.

\section{Installation}

\subsection{Environmental variables}

Set the \texttt{RSFROOT} environmental variable to the directory where
you want RSF installed. To use RSF effectively, you may also want to add
\texttt{\$RSFROOT/bin} to your \texttt{PATH} environmental variable, set
\texttt{PYTHONPATH} to \texttt{\$RSFROOT/lib}, add set \texttt{DATAPATH} to
the directory for storing temporary data files. 

Example configuration for \texttt{csh} and \texttt{tcsh}:
\begin{verbatim}
setenv RSFROOT /usr/local/rsf
set path = ($path $RSFROOT/bin)
if ($?PYTHONPATH) then
   setenv PYTHONPATH ${PYTHONPATH}:$RSFROOT/lib
else
   setenv PYTHONPATH $RSFROOT/lib
endif
setenv DATAPATH /var/tmp/
\end{verbatim}

Example configuration for \texttt{bash}:
\begin{verbatim}
export RSFROOT=/usr/local/rsf
export PATH=$PATH:$RSFROOT/bin
if [ -n "$PYTHONPATH" ]; then
   export PYTHONPATH=${PYTHONPATH}:$RSFROOT/lib
else
   export PYTHONPATH=$RSFROOT/lib
fi
export DATAPATH=/var/tmp/
\end{verbatim}

Notice the slash at the end of the \texttt{DATAPATH} variable.

\subsection{Software construction}

\begin{enumerate}

\item Install SCons.

If you don't have the latest version of SCons already installed, you can do so
by going to \texttt{scons} directory. Install SCons from the enclosed
\texttt{rpm} file or by unpacking the source and running 
\begin{verbatim}
python setup.py install
\end{verbatim}

\item Configuration.

Change to the top RSF source directory and run
\begin{verbatim}
scons config
\end{verbatim}

You can examine the \texttt{config.py} file that this command
generates.  Additional options are available. You can obtain a full
list of customizable variables by running \texttt{scons -h}. For
example, to install C++ and Fortran-90 API bindings in addition to the
basic package, run
\begin{verbatim}
scons API=c++,fortran-90 config
\end{verbatim}

To change configuration at any time, you may need to run 
\begin{verbatim}
scons -c config
\end{verbatim}
first to remove previous settings.

\item Building and installing the package.

Run \texttt{scons install} or the following two commands in succession: 
\begin{verbatim}
scons
scons install
\end{verbatim}

If you need ``root'' privileges for installing under \texttt{\$RSFROOT}, you may need to run
\begin{verbatim}
scons
su
scons install
\end{verbatim}

\item Cleaning.

To clean all intermediate files generated by SCons, run
\begin{verbatim}
scons -c
\end{verbatim}

To clean all intermediate files and all installed files, run
\begin{verbatim}
scons -c install
\end{verbatim}

\end{enumerate}

\section{Other installations}

There are two other packages that might be useful in conjuction with RSF:

\subsection{RSF reproducible figures}

\begin{itemize}
\item Using Subversion, run
\begin{verbatim}
svn co http://egl.beg.utexas.edu/svn/rsffigs $RSFROOT/figs
\end{verbatim}
\item Without Subversion, download the tarball by following the link at
\url{http://egl.beg.utexas.edu/viewcvs/?root=rsffigs}
\end{itemize}
This installs a wide collection of more than 2,000 reproducible
figures. It may take a long time to download and some space on disk.
The figures are preserved with the purpose to do regression testing
whenever the software or the environment change.

\subsection{\LaTeX\ package}

\begin{itemize}
\item Using Subversion, run
\begin{verbatim}
svn co http://egl.beg.utexas.edu/svn/texmf/trunk texmf
\end{verbatim}
\item Without Subversion, download the tarball by following the link at
  \url{http://egl.beg.utexas.edu/viewcvs/?root=texmf}
\end{itemize}
This installs \LaTeX2e\ and \texttt{latex2html} macros for writing
geophysical papers, books, and reports. The \texttt{texmf} directory should
be placed where \LaTeX\ can find it. Some systems recognize
\texttt{\$HOME/texmf} as one of the default places.

\section{Troubleshooting}

\subsection{Troubles with svn}
This section is contributed by Nick Vlad.

\begin{itemize}
\item If, after running the ``svn co...''
command, nothing happens, no message, no return to the command
line: you may be behind a proxy.  This is especially likely if your
computer is on a corporate Intranet.  To get past a proxy, you will
need to tell Subversion the name of the proxy and port that will allow
\texttt{svn} through. First, obtain this information from your IT people. After
you get an IP number of a URL that looks like
\texttt{www-proxy.yourcompany.com} and a port number (most likely 80, the
standard HTTP port), open your \verb#~/.subversion/servers# file in a text
editor. If this file does not exist, running any \texttt{svn} command (even an
unsuccessful one, like the one above) will automatically create the
file. In the \texttt{[global]} section, add the following lines, with your own
proxy URL and port names instead of the dummy ones below:
\begin{verbatim}
http-proxy-host = www-proxy.yourcompany.com
\end{verbatim}
\begin{verbatim}
http-proxy-port = 80
\end{verbatim}
Now your \texttt{svn} commands should work. You can find more details at 
\url{http://subversion.tigris.org/faq.html#proxy}.
\item If you get a ``is already a working copy for a different URL'' error,
this means you have an existing directory downloaded from another
server. Run \texttt{svn switch --relocate} to switch servers.
\end{itemize}

\subsection{Troubles with cygwin}
If, installing on \texttt{cygwin}, you get a message about RPC
libraries, install the \texttt{sunrpc} package located under
\texttt{Libs} in the \texttt{Setup} program.

%\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
