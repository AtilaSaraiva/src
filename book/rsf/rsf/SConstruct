from rsftex import *

import os
import rsfdoc
import rsfprog

root = os.environ.get('RSFROOT')
libdir = os.path.join(root,'lib')
bindir = os.path.join(root,'bin')
sfdoc  = os.path.join(bindir,'sfdoc')
run = 'PYTHONPATH=%s LD_LIBRARY_PATH=%s $SOURCE' % \
      (os.environ.get('PYTHONPATH'),os.environ.get('LD_LIBRARY_PATH'))

output = {'.tex':'l',
          '.wiki':'m'}

for prog in rsfdoc.progs.keys():
    for out in output.keys():
        Command2(prog+out, sfdoc,'%s -%s . %s' % (run,output[out],prog))
    Depends('prog.ltx',prog+'.tex')
    Depends('prog.wiki',prog+'.wiki')

Paper('install',use=['[bookmarks=true]hyperref','color','listings'])
Paper('tour',use='listings,color,hyperref')
Paper('format',use='hyperref')
Paper('api', use='hyperref,listings',include='\\newcommand{\\RSF}{../../..}')
Paper('demo',use='hyperref,listings',include='\\newcommand{\\RSF}{../../..}')
Paper('adding',options='short',use='hyperref')

Paper('prog',use='hyperref,amsmath,fancybox,listings,jfc',
      include='\\newcommand{\\RSF}{../../..}',color='rose')

Paper('abstract',lclass='eage',
      include=r'''
      \thispagestyle{empty}
      \setlength{\textheight}{25cm}
      \newenvironment{geotitle}{%
      \begin{minipage}{\textwidth}%
      \bfseries\Large\centering}
      {\end{minipage}\vspace{.2in}}%
      \renewcommand{\title}[1]{%
      \noindent\begin{geotitle}\setlength{\parindent}{0em}\par%
      {\smallskip #1}\end{geotitle}}
      \renewcommand{\author}[1]{%
      \begin{center}
      \textbf{#1}
      \end{center}}
      ''')

#Paper('dummy')

Depends2('install',map(lambda x: x+'.install',
                       Split('api format install prog tour demo')))

#Paper('vienna',lclass='beamer',use='helvet,hyperref',
#     include=r'''
#     \mode<presentation>
#     {
#     \usetheme{Madrid}
#     \usecolortheme{albatross}
#     % or ...
         
#     %  \setbeamercovered{transparent}
#     % or whatever (possibly just delete it)
#     }
#     ''')

#Paper('vancouver',lclass='beamer',use='helvet,hyperref,listings',
#      include=r'''
#      \mode<presentation>{\usetheme{Madrid}}
#      \newcommand{\TEXMF}{%s/texmf}
#      ''' % os.environ.get('HOME'))

#Paper('ssd2',
#      lclass='beamer',
#      use='helvet,hyperref,listings',
#      include=r'''
#               \mode<presentation>{\usetheme{Szeged}}
#               \usepackage[absolute,overlay]{textpos}
#               \setlength{\TPHorizModule}{1mm}
#               \setlength{\TPVertModule}{1mm}
#               \newcommand{\MadLogo}{%
#               \begin{textblock}{30}(115,-25)
#               \includegraphics[width=30\TPHorizModule]{Fig/Madagascar}
#               \end{textblock}}
#               ''')

End(use='[bookmarks=true]hyperref')
