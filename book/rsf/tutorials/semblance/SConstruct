from rsf.proj import *

#C-ordered 3D array, little-endian signed 16-bit int
#NX: 250
#NY: 200
#NZ: 55
#Inline min: 1207.0
#Inline max: 1456.0
#Crossline min: 1253.0
#Crossline max: 1452.0
#Time min: 116.0 ms
#Time max: 2092.0 ms
#Sample rate: 4.0 milliseconds

Fetch('penobscot_subset.bin','data',
      server='https://github.com',
      top='seg/tutorials/raw/master/1512_Semblance_coherence_and_discontinuity')

Flow('penobscot','penobscot_subset.bin',
     '''
     echo in=$SOURCE n1=55 n2=200 n3=250
     o1=0.116 d1=0.004 unit1=s label1=Time
     o2=1253 d2=1 label2=Crossline
     o3=1207 d3=1 label3=Inline
     data_format=native_short |
     dd type=float | transp plane=23
     ''',stdin=0)

Result('penobscot',
       '''
       byte gainpanel=all |
       grey3 title="Seismic data" frame1=27 frame2=125 frame3=100
       flat=y point1=0.25 
       ''')

for case in range(3):
    coh = 'coh%d' % case
    Flow(coh,'penobscot','coherence mode=c%d twod=n' % (case+1))
    Result(coh,
           '''
           byte gainpanel=all allpos=y |
           grey3 title="%s" frame1=27 frame2=125 frame3=100
           flat=y point1=0.25 
           ''' % ('Bahorich and Farmer (1995)','Marfurt et al. (1998)','Gersztenkorn and Marfurt (1999)')[case])

End()
