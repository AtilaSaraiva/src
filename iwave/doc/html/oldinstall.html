<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>IWAVE</title>

<link rel="stylesheet" type="text/css" href="mainPage.css" media="all">
<link rel="SHORTCUT ICON" href="images/trip.logo.small.png">
</head>

<div id="header"><div id="headertext"><a href="./index.html"><h1>IWAVE: A framework for wave simulation</h1></a></div></div>

<div id="navigation">
<a href="http:./index.html>IWAVE home page</a>
<br>
<a href="http://www.trip.caam.rice.edu/"><img border=0 style="color:black" src="images/TRIPLogo.png" alt=""></a>
<br>
<a href="http://www.rice.edu"><img style="color:black" border=0 src="images/RiceLogo.png" alt="Rice University"></a>
<br>
</div>

<div id="content">
<h1>Installing IWAVE</h1>
<p>
<h2>Quick Start</h2>
<p> 
Assuming you've downloaded the IWAVE collection (iwave
directory and its subdirs) from the TRIP subversion site,
<p>
svn co https://cvs.caam.rice.edu:3129/svn/trip/trunk/iwave[optional release number]
<p>
<ul>
<li> download the TRIP admin package from the subversion site, if you haven't already done so:
<p>
svn co https://cvs.caam.rice.edu:3129/svn/trip/trunk/admin
<p>
<li> define the environment variables COMP and TRIPADMIN to be the compiler tag and path to the admin directory, respectively (NOTE - you may need other evironment variables - see below, also see <a href="./build.html">TRIP build system</a> docs for a detailed description of compiler tag possibilities);</li>
<li> cd to the iwave root directory, enter
<p>
   $ make -f MakeBuild install
<p>
</li>
<li>
To create a local copy of the documentation pages, you will need <a href="http://www.doxygen.org">doxygen</a> installed locally, and define the environment variable DOXYGEN whose value is the path to the doxygen command. Then enter
<p>
$ make -f MakeBuild docs
<p>
</li>
</ul>
<p>
<h2>Detailed Instructions</h2>
<p>
<ol>
<li> 
<b>Preconditions: </b>
<p>
   You should be able to install IWAVE in any standard Un*x
   environment with the typical features (sh and csh shells or
   descendents, Gnu make, ISO C99-compliant C compiler).
<p>
   The IWAVE package installs via a version of the TRIP build system,
   You will need to download the admin directory, which contains the shell
   and make scripts which make up the build system, from the TRIP subversion
   site, before installing IWAVE: 
<p>
   $ svn co https://cvs.caam.rice.edu:3129/svn/trip/trunk/admin
<p>
   You don't have to do anything else to the admin directory, other
   than download it and put it somewhere convenient, <i>provided</i>
   that the config file for your combination of compiler and platform
   is one of those provided, and that the choices of compiler options
   and directives in that config file are appropriate. Otherwise you
   will need to edit the config file, or possibly create a new
   one. See the <a href="./build.html">TRIP build system</a> docs for
   more details.
<p>
   Define at least the following two environment variables:
<p>
   $ setenv COMP [tag for compiler family]<br>
   $ setenv TRIPADMIN [path to the TRIP admin directory]
<p>
   The compiler family tag COMP is often, though not always, the name
   of the C compiler of the family (for example, COMP=gcc for the Gnu
   family). It forms the last component of the config file name (in
   TRIPADMIN/rules).
<p>
   These (and other) variables should be added to the controlling file
   in your home directory for whichever shell you use - .bashrc or
   .bash_profile for bash users (or analogues for other Bourne shell
   descendents), .cshrc for C-shell derivative (eg. tcsh) users. The C
   shell needs to be installed on your system, as the helper scripts
   run under csh. However the shells pass the environment to subshells
   of either type, so the scripts work perfectly well in an sh
   environment.
<p>
   You will need to make sure that your architecture is recognized by
   the build system, and that the admin/rules directory contains a
   config (Prg.defs...) file for your architecure and compiler suite,
   identified by appropriate tags. Config files provide compiler- and
   architecture-dependent compile and link flags. If your
   combination of architecture and vendor does not correspond to a
   config file in admin/rules, you will need to construct one, using
   those supplied as models. A list of the combinations for which
   config files are shipped with this release appears in in the 
<a href="./build.html">build system docs</a>.
<p>
   Whether you build a config file of your own or use one of ours, you
   will need to ensure that your environment is compatible with the
   config file for the architecture and compiler family selected. For
   example, the gcc config files supplied with this package
   parametrize the path to gcc by the environment variable GCCBIN
   (often, but not necessarily, /usr/bin). Using gcc with the config
   files supplied thus entails defining this additional environment
   variable. Similarly, config files for MPI-enabled compilation may
   parametrize the path to the installed MPI by the environment
   variable MPIROOT (this is true of the MPI-enabled config files
   supplied with this release).
<p>
</li>
<li>
<b>Top-level Make Targets:</b>
<p>
 You can install the entire package via the master makefile MakeBuild:
<p>
   $ make -f MakeBuild (target)
<p>
   in which (target) is one of the targets defined by MakeBuild:
<ul>
<li>
   <b>(default)</b>   - builds all directories, including the model/method 
                package defined by the macro MODEL. The default value 
                of MODEL=asg. You can override this choice by passing
                MODEL to make. The behaviour is that the default target
                is executed in every package directory, assuming that a 
                Makefile is present; if not, one is generated via the 
                TRIP build system and the install target is executed,
                which cleans the directory and builds all targets from
                scratch. [NB for occasional makefile users: "default" 
                in this context means "no target specified", that is,
                "make -f MakeBuild"]
</li><p><li>
   <b>clean</b>        - runs the clean make target in each package, which removes
                intermediate files (object files, for example), but leaves
                libraries intact in lib/ARCH subdirs and binaries in 
                bin/ARCH subdirs
</li><p><li>
   <b>burn</b>        - runs the burn make target in each package, returning it to 
                its initial state.
</li><p><li>
   <b>install</b>      - reinitializes each package makefile and rebuilds the package
                from scratch - use this target, rather than the default, to
                force a clean rebuild of all packages.
</li><p><li>
   <b>bin</b>         - make binaries in main subdirs of all packages. Implies rebuilding libraries on which these depend. Useful when a few header or source files distributed amongst the packages have been changed, or when compiler options have changed - avoids running make in the demo directories.
</li><p><li>
   <b>lib</b>         - make all libraries (object archives). All IWAVE binaries are statically linked, so these are output of ar.
</li><p><li>
   <b>docs</b>        - create html documentation in those packages supporting it. To
                use this target, you must have doxygen installed, and assign
                the environment variable DOXYGEN to the path to the doxygen
                command. Not part of install target - must be run separately.
</li>
</ul>
</li>
<li>
<p>
<b>Package-by-package Installation:</b>
<p>
   You can invoke the build system's make targets directly, but should
   do so within a C shell so that the necessary environment is set up
   from your .cshrc (or, alternatively, you can also define and export
   the required environment variables in your Bourne shell config
   file).
<p>
   cd to the package root directory (for example, (this dir)/base);
   copy over the boot makefile from admin:
<p>
   $ cp $TRIPADMIN/makefile.boot Makefile
<p>
   and enter
<p>
   $ make install
<p>
</li>
<li>
<b> Contents and Dependencies:</b>
<p>
   Note that dependencies exist between the packages. Here is a
   current list of the generic iwave packages:
<p>
<table border="1">
<tr>
<td>package</td>
<td>depends on (in order of precedence)</td>
</tr>
<tr>
<td>base</td>
<td>(nothing)</td>
</tr>
<tr>
<td>sucore</td>
<td>(nothing)</td>
</tr>
<tr>
<td>trace</td>
<td>sucore and base</td>
</tr>
<tr>
<td>grid</td>
<td>base</td>
</tr>
<tr>
<td>iwave</td>
<td>grid, trace, sucore, and base</td>
</tr>
<tr>
<td>sample</td>
<td>iwave, grid, trace, sucore, and base</td>
</tr>
</table>
<p>
   In addition to the core packages, iwave contains packages implementing particular models
   and classes of difference schemes. These depend on all of the generic
   packages. Currently active model/method packages:
<p>
<table border="1">
<tr>
<td>name</td>
<td>description</td>
</tr>
<tr>
<td>asg</td>
<td>staggered grid variable-density acoustics</td>
</tr>
</table>
<p>
   Dependencies are encoded in the package hclasspath file (see item 5
   in the <a href="./build.html">build notes</a> 
for an explanation of this file and its
   functions). If you add a new package, you will need to acknowledge
   any dependencies on other SEAM and user-installed packages by
   creating an appropriate hclasspath. Also, if you move any of the 
   subpackages out of the iwave directory, you will need to change
   all references to it in all of the hclasspath files so that a 
   correct relative or absolute path is restored. As downloaded, all
   of the IWAVE subpackages are in the iwave directory, and all of the
   pathnames are relative: for example, asg/hclasspath includes ../base
   in its path.
<p>
   Other, implicit dependencies on headers and libraries, such as
   those provided by the operating system, compiler suite, MPI,
   OpenMP, etc., do not need explicit representation in the hclasspath
   - these are taken care of by the installation process for these
   system-level applications.
<p>
</li>
<li>
<b>What you get:</b>
<p>
   Commands generated by installation of the IWAVE packages are
   described in the package documentation (doc subdir, html reference pages produced by doxygen and accessed via the links listed on the IWAVE home page).
<p>   
   All IWAVE commands also self-doc after the fashion of SU commands. However this feature is deprecated: the self-doc text will not be updated as regularly, for future releases, as the html documentation pages.
<p>
</li>
</ol>
<hr>
<a href="./index.html">IWAVE Home Page</a>
<hr>
Maintained by William W. Symes<address><a href="mailto:symes@caam.rice.edu">symes@caam.rice.edu</a></address>
<!-- Created: Sat Aug 28 14:47:41 CDT 2010 -->
<!-- hhmts start -->
Last modified: Tue Sep 21 17:57:57 CDT 2010
<!-- hhmts end -->
  </body>
</html>
